



1. 设备端：

   1. 自动均匀性校准：

      - **离散数据：电流I（此处电流I的值和 `自动mask手动PI` 中的电流值相同）、灰度G**
      - 日志关键字`CollectPI`

   2. 自动mask手动PI：
      - 离散数据：电流I，光强P（已有）

        `OnFitGG P-I`

      - **拟合结果：电流I、光强P**

        `autoMask_manPI`

        

   3. **拟合结果：光强P、灰度G**

      ​	` CollectPG gamma_exp_manPower_avgGray`（此时的P是通过拟合得到的）

      ​	日志关键字`PG_coeff`

      ​	`gamma_exp_manPower_avgGray`

   

2. 4K母光源：

   - **离散数据：电流I，光强P**

   查看方式：4K母光源的控制机台`/home/heygears/app/release`的该路径下新建`tmp`文件夹，模组跑的图片就会存入其中，图片命名方式即为`电流I-光强P-灰度G`

   

   4K母光源上日志查看路径

   `/home/heygears/.heygears/logs/220726`

   `2022-07-26 13:19:44.721 [DEBUG] WriterEEPROM QJsonObject({"100_1500":[-6.454869890148984e-06,0.004198838025331497,-0.5713498592376709,32.304725646972656]`

   

   4K母光源的GP拟合函数可以在日志中查看

   2022-08-05 16:20:05.022 [DEBUG] CvtGrayToPower 792 `fn_coeffs`= (QVariant(double, -6.89945e-06), QVariant(double, 0.00441767), QVariant(double, -0.604259), QVariant(double, 33.9182))

   

   - **拟合结果：电流I、光强P**
   - **离散数据：电流I，灰度G**

   见上n

   - **拟合结果：光强P、灰度G**

   - 日志关键字`PG4K_coeff`

   

3. G-G的拟合结果

   - **离散数据：光强P、设备端的灰度G、4K母光源上的灰度G**
   - 日志关键字`P_G_G4K`
   - **拟合结果：G-G**
   - 日志关键字`P_G_G4K`的内容结束部分



















1. 设备端：

   1. 自动均匀性校准：

      - **离散数据：电流I（此处电流I的值和 `自动mask手动PI` 中的电流值相同）、灰度G**

   2. 自动mask手动PI：

      - 离散数据：电流I，光强P（已有）

      - **拟合结果：电流I、光强P**	`manPI`

        ```c++
        2022-07-25 14:37:00.290 [0x0000005565fd1e80] [graycalib.cpp:791->QVariant GrayCalib::OnFitBasePI(const QVariant&)][DEBUG] OnFitBasePI P-I= 165 21.415
        2022-07-25 14:37:00.290 [0x0000005565fd1e80] [graycalib.cpp:791->QVariant GrayCalib::OnFitBasePI(const QVariant&)][DEBUG] OnFitBasePI P-I= 175 22.69
        2022-07-25 14:37:00.290 [0x0000005565fd1e80] [graycalib.cpp:791->QVariant GrayCalib::OnFitBasePI(const QVariant&)][DEBUG] OnFitBasePI P-I= 120 15.72
        2022-07-25 14:37:00.290 [0x0000005565fd1e80] [graycalib.cpp:791->QVariant GrayCalib::OnFitBasePI(const QVariant&)][DEBUG] OnFitBasePI P-I= 130 17.01
        2022-07-25 14:37:00.290 [0x0000005565fd1e80] [graycalib.cpp:791->QVariant GrayCalib::OnFitBasePI(const QVariant&)][DEBUG] OnFitBasePI P-I= 91 11.87
        2022-07-25 14:37:00.290 [0x0000005565fd1e80] [graycalib.cpp:791->QVariant GrayCalib::OnFitBasePI(const QVariant&)][DEBUG] OnFitBasePI P-I= 160 20.785
        2022-07-25 14:37:00.291 [0x0000005565fd1e80] [graycalib.cpp:791->QVariant GrayCalib::OnFitBasePI(const QVariant&)][DEBUG] OnFitBasePI P-I= 170 22.06
        2022-07-25 14:37:00.291 [0x0000005565fd1e80] [graycalib.cpp:791->QVariant GrayCalib::OnFitBasePI(const QVariant&)][DEBUG] OnFitBasePI P-I= 200 25.76
        2022-07-25 14:37:00.291 [0x0000005565fd1e80] [graycalib.cpp:791->QVariant GrayCalib::OnFitBasePI(const QVariant&)][DEBUG] OnFitBasePI P-I= 210 26.98
        2022-07-25 14:37:00.291 [0x0000005565fd1e80] [graycalib.cpp:791->QVariant GrayCalib::OnFitBasePI(const QVariant&)][DEBUG] OnFitBasePI P-I= 100 13.055
        2022-07-25 14:37:00.291 [0x0000005565fd1e80] [graycalib.cpp:791->QVariant GrayCalib::OnFitBasePI(const QVariant&)][DEBUG] OnFitBasePI P-I= 110 14.4
        2022-07-25 14:37:00.291 [0x0000005565fd1e80] [graycalib.cpp:791->QVariant GrayCalib::OnFitBasePI(const QVariant&)][DEBUG] OnFitBasePI P-I= 240 30.57
        2022-07-25 14:37:00.291 [0x0000005565fd1e80] [graycalib.cpp:791->QVariant GrayCalib::OnFitBasePI(const QVariant&)][DEBUG] OnFitBasePI P-I= 250 31.74
        2022-07-25 14:37:00.292 [0x0000005565fd1e80] [graycalib.cpp:791->QVariant GrayCalib::OnFitBasePI(const QVariant&)][DEBUG] OnFitBasePI P-I= 140 18.28
        2022-07-25 14:37:00.292 [0x0000005565fd1e80] [graycalib.cpp:791->QVariant GrayCalib::OnFitBasePI(const QVariant&)][DEBUG] OnFitBasePI P-I= 150 19.55
        2022-07-25 14:37:00.292 [0x0000005565fd1e80] [graycalib.cpp:791->QVariant GrayCalib::OnFitBasePI(const QVariant&)][DEBUG] OnFitBasePI P-I= 290 36.4
        2022-07-25 14:37:00.292 [0x0000005565fd1e80] [graycalib.cpp:791->QVariant GrayCalib::OnFitBasePI(const QVariant&)][DEBUG] OnFitBasePI P-I= 180 23.26
        2022-07-25 14:37:00.292 [0x0000005565fd1e80] [graycalib.cpp:791->QVariant GrayCalib::OnFitBasePI(const QVariant&)][DEBUG] OnFitBasePI P-I= 190 24.52
        2022-07-25 14:37:00.292 [0x0000005565fd1e80] [graycalib.cpp:791->QVariant GrayCalib::OnFitBasePI(const QVariant&)][DEBUG] OnFitBasePI P-I= 320 39.82
        2022-07-25 14:37:00.292 [0x0000005565fd1e80] [graycalib.cpp:791->QVariant GrayCalib::OnFitBasePI(const QVariant&)][DEBUG] OnFitBasePI P-I= 220 28.13
        2022-07-25 14:37:00.293 [0x0000005565fd1e80] [graycalib.cpp:791->QVariant GrayCalib::OnFitBasePI(const QVariant&)][DEBUG] OnFitBasePI P-I= 230 29.38
        2022-07-25 14:37:00.293 [0x0000005565fd1e80] [graycalib.cpp:791->QVariant GrayCalib::OnFitBasePI(const QVariant&)][DEBUG] OnFitBasePI P-I= 270 34.05
        2022-07-25 14:37:00.293 [0x0000005565fd1e80] [graycalib.cpp:791->QVariant GrayCalib::OnFitBasePI(const QVariant&)][DEBUG] OnFitBasePI P-I= 145 18.92
        2022-07-25 14:37:00.293 [0x0000005565fd1e80] [graycalib.cpp:791->QVariant GrayCalib::OnFitBasePI(const QVariant&)][DEBUG] OnFitBasePI P-I= 155 20.19
        2022-07-25 14:37:00.293 [0x0000005565fd1e80] [graycalib.cpp:791->QVariant GrayCalib::OnFitBasePI(const QVariant&)][DEBUG] OnFitBasePI P-I= 125 16.34
        2022-07-25 14:37:00.293 [0x0000005565fd1e80] [graycalib.cpp:791->QVariant GrayCalib::OnFitBasePI(const QVariant&)][DEBUG] OnFitBasePI P-I= 135 17.66
        2022-07-25 14:37:00.294 [0x0000005565fd1e80] [graycalib.cpp:801->QVariant GrayCalib::OnFitBasePI(const QVariant&)][DEBUG] OnFitBasePI 801 manPI= QVector(6.69508e-08, -8.45055e-05, 0.147418, -0.889087)
        ```

        

   3. **拟合结果：光强P、灰度G**

   

2. 4K母光源：

   - **离散数据：电流I，光强P**
   - **拟合结果：电流I、光强P**
   - **离散数据：电流I，灰度G**

   - **拟合结果：光强P、灰度G**

   

3. G-G的拟合结果

   - **离散数据：光强P、设备端的灰度G、4K母光源上的灰度G**
   - **拟合结果：G-G**

manPI







key= "100_1500" GG_coeffs= QVector(1.67e-05, -0.0077329, 2.15609, -70.7394)

gamma_exp= "100_1500" 
 I= 100 
 avgGrey= 150.26 
 coeff std::vector(1.67e-05, -0.0077329, 2.15609, -70.7394) 
 newGrey= 135.296 
 LookUpPower= 15.8771
